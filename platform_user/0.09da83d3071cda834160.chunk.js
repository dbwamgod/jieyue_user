webpackJsonp([0],{111:function(n,e,t){"use strict";function a(n){l||(t(370),t(372))}Object.defineProperty(e,"__esModule",{value:!0});var o=t(313),i=t.n(o);for(var r in o)"default"!==r&&function(n){t.d(e,n,function(){return o[n]})}(r);var s=t(374),d=t.n(s),l=!1,c=t(0),p=a,m=c(i.a,d.a,!1,p,"data-v-9521c290",null);m.options.__file="src\\views\\home\\home.vue",e.default=m.exports},313:function(n,e,t){"use strict";function a(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(e,"__esModule",{value:!0});var o=t(31),i=a(o),r=t(63),s=a(r),d=t(32),l=a(d),c=t(100),p=a(c),m=t(2),u=a(m);e.default={data:function(){var n=this;return{SpinType:!1,ruleInline:{fullName:[{required:!0,type:"string",pattern:/\S/,message:"请输入正确的组织机构全称",trigger:"blur"}],organizationCode:[{required:!0,message:"请输入组织机构编码且为数字",trigger:"blur"}],organizationName:[{required:!0,message:"请输入组织机构简称",trigger:"blur"}]},modal2:!1,formItem:{description:"",fullName:"",organizationCode:"",organizationName:""},searchShow:!1,searchWord:"",dataCount:0,page:{pageIndex:1,pageSize:10},columns7:[{title:"租户名称",key:"tenantName"},{title:"组织机构简称",key:"organizationName"},{title:"组织机构全称",key:"fullName"},{title:"组织机构编码",key:"organizationCode"},{title:"上级机构名称",key:"parentName"},{title:"描述",key:"description"},{title:"更新时间",key:"modifyTime"},{title:"操作",key:"action",width:150,align:"center",render:function(e,t){return e("div",[n.operation.edit||n.operation.edit_del?e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){n.edit(t.index)}}},"修改"):"",n.operation.del||n.operation.edit_del?e("Button",{props:{type:"error",size:"small"},on:{click:function(){n.remove(t.index)}}},"删除"):""])}}],data6:[],addOrigin:!1,flag:0,searchInfo:!1,operation:{edit:!1,del:!1,edit_del:!1},real:[]}},inject:["reload"],computed:{},created:function(){var n=this;JSON.parse(localStorage.getItem("Jurisdiction"))?JSON.parse(localStorage.getItem("Jurisdiction")).forEach(function(e){e.child.forEach(function(e){"查询组织机构列表"==e.resourceName||("新增组织机构"==e.resourceName?n.addOrigin=!0:"修改组织机构"==e.resourceName?(n.operation.edit=!0,n.flag=1):"删除组织机构"==e.resourceName&&(1===n.flag?n.operation.edit_del=!0:n.operation.del=!0))})}):(this.$Message.error("无法检测到你的权限"),this.$store.commit("logout",this),this.$store.commit("clearOpenedSubmenu"),this.$router.push({name:"login"})),u.default.remove("res_index"),u.default.remove("role_index"),u.default.remove("user_index"),this.$store.commit("orgSearch"),0!==this.$store.state.app.orgSearchFlag.length&&(this.searchWord=this.$store.state.app.orgSearchFlag,this.check_list()),u.default.get("home_index")&&(this.page.pageIndex=Number(u.default.get("home_index")),u.default.remove("home_index")),this.check_list()},methods:{sure:function(){var n=this;this.$refs.formItem.validate(function(e){e?n.$axios({method:"post",url:p.default.organizationUpdate(),data:{description:n.formItem.description,fullName:n.formItem.fullName,organizationCode:n.formItem.organizationCode,organizationName:n.formItem.organizationName,organizationId:n.formItem.organizationId},headers:{Authorization:u.default.get("token"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){if(200===e.data.code){var t=n.data6[u.default.get("org_num")];t.description=n.formItem.description,t.fullName=n.formItem.fullName,t.organizationCode=n.formItem.organizationCode,t.organizationName=n.formItem.organizationName,n.$Message.info("已修改"),n.modal2=!1}else n.$Message.info(e.data.msg)}):n.$Message.error("组织机构编码不能为空!")})},cancel:function(){var n=this;this.data6.map(function(e){e.userId===n.real.userId&&s.default.apply(Object,[{}].concat((0,l.default)(n.real)))});this.$refs.formItem.resetFields(),this.modal2=!1,this.$Message.info("已取消")},searchChange:function(){this.page.pageIndex=1,this.searchInfo=!0,this.$store.commit("orgSearch",this.searchWord),this.check_list()},changepage:function(n){this.page.pageIndex=n,this.check_list()},check_list:function(){var n=this;this.SpinType=!0,this.$axios({method:"post",url:p.default.organizationList(),data:{keyword:this.$store.state.app.orgSearchFlag||"",currentPage:(this.searchInfo,this.page.pageIndex||1),pageSize:this.page.pageSize},headers:{Authorization:u.default.get("token"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){200==e.data.code?(n.SpinType=!1,e.data.data?(n.data6=e.data.data,n.dataCount=e.data.page.totalRecords):(n.searchInfo,n.data6=[],n.dataCount=0),n.searchInfo&&(e.data.page?n.page.pageIndex=e.data.page.currentPage:n.page.pageIndex=1),n.searchInfo=!1):n.$Message.info(e.data.msg)})},add_ops:function(){this.$router.push({path:"/addOrganization",query:{data6:this.data6}})},edit:function(n){this.formItem=JSON.parse((0,i.default)(this.data6[n])),this.real=JSON.parse((0,i.default)(this.data6[n])),this.modal2=!0,u.default.set("org_num",n),u.default.set("home_index",this.page.pageIndex)},remove:function(n){var e=this;this.$Modal.confirm({title:"删除警告",content:"<p>您确定要删除该组织吗</p>",loading:!0,onOk:function(){setTimeout(function(){e.$axios({method:"post",url:p.default.organizationDel(),data:{organizationId:e.data6[n].organizationId,userId:u.default.get("userId")},headers:{Authorization:u.default.get("token"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(n){200==n.data.code?(e.data6.length<2?e.$axios({method:"post",url:p.default.organizationList(),data:{keyword:e.searchWord,currentPage:e.page.pageIndex?1:--e.page.pageIndex,pageSize:e.page.pageSize},headers:{Authorization:u.default.get("token"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(n){200==n.data.code?(e.page.pageIndex>1&&--e.page.pageIndex,n.data.data?(e.data6=n.data.data,e.dataCount=n.data.page.totalRecords):n.data.page?(e.dataCount=0,e.data6=[]):(e.data6=[],e.dataCount=0)):e.$Message.info(n.data.msg)}):(e.$Message.info("已删除"),e.searchInfo=!0,e.check_list()),e.$Modal.remove()):400==n.data.code?(e.$Modal.remove(),e.$Message.info("存在下级机构 不能删除/组织机构id不能小于1")):(e.$Modal.remove(),e.$Message.info(n.data.msg))})},0)}})}}}},370:function(n,e,t){var a=t(371);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(9)("c1b5d6e6",a,!1)},371:function(n,e,t){e=n.exports=t(8)(!1),e.push([n.i,"\n.paging[data-v-9521c290] {\n    float: right;\n    margin-top: 10px;\n}\n",""])},372:function(n,e,t){var a=t(373);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(9)("0fa7028b",a,!1)},373:function(n,e,t){e=n.exports=t(8)(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},374:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticStyle:{position:"relative",height:"100%",padding:"10px"}},[t("Row",{staticClass:"code-row-bg",staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("Col",{attrs:{span:"4"}},[t("h2",{staticStyle:{margin:"6px 0 0 20px"}},[n._v("组织机构管理")])]),n._v(" "),t("Col",{staticStyle:{"text-align":"right",width:"40%","margin-right":"15px"}},[t("Input",{staticStyle:{width:"35%",height:"34px"},attrs:{size:"large",placeholder:"请输入搜索内容..."},model:{value:n.searchWord,callback:function(e){n.searchWord=e},expression:"searchWord"}}),n._v(" "),t("Button",{attrs:{type:"primary"},on:{click:n.searchChange}},[t("Icon",{staticStyle:{"font-size":"17px"},attrs:{type:"ios-search-strong"}})],1),n._v(" "),n.addOrigin?t("Button",{attrs:{type:"primary"},on:{click:n.add_ops}},[n._v("新增组织机构管理")]):n._e()],1)],1),n._v(" "),t("Table",{staticStyle:{margin:"5px 15px 0 15px"},attrs:{border:"",columns:n.columns7,data:n.data6,loading:n.SpinType}}),n._v(" "),t("Page",{staticClass:"paging",attrs:{total:n.dataCount,"page-size":n.page.pageSize,current:n.page.pageIndex,"show-total":""},on:{"on-change":n.changepage}}),n._v(" "),t("Modal",{attrs:{title:"修改信息","footer-hide":!0,closable:!1,"mask-closable":!1},model:{value:n.modal2,callback:function(e){n.modal2=e},expression:"modal2"}},[t("Form",{ref:"formItem",attrs:{model:n.formItem,rules:n.ruleInline}},[t("FormItem",{attrs:{prop:"description"}},[t("p",[n._v("描述")]),n._v(" "),t("Input",{attrs:{type:"text",placeholder:"描述"},model:{value:n.formItem.description,callback:function(e){n.$set(n.formItem,"description",e)},expression:"formItem.description"}})],1),n._v(" "),t("FormItem",{attrs:{prop:"fullName"}},[t("p",[n._v("组织机构全称")]),n._v(" "),t("Input",{attrs:{type:"text",placeholder:"组织机构全称"},model:{value:n.formItem.fullName,callback:function(e){n.$set(n.formItem,"fullName",e)},expression:"formItem.fullName"}})],1),n._v(" "),t("FormItem",{attrs:{prop:"organizationCode"}},[t("p",[n._v("组织机构编码")]),n._v(" "),t("Input",{attrs:{type:"text",placeholder:"组织机构编码"},model:{value:n.formItem.organizationCode,callback:function(e){n.$set(n.formItem,"organizationCode",e)},expression:"formItem.organizationCode"}})],1),n._v(" "),t("FormItem",{attrs:{prop:"organizationName"}},[t("p",[n._v(" 组织机构简称")]),n._v(" "),t("Input",{attrs:{type:"text",placeholder:"组织机构简称"},model:{value:n.formItem.organizationName,callback:function(e){n.$set(n.formItem,"organizationName",e)},expression:"formItem.organizationName"}})],1)],1),n._v(" "),t("div",{staticStyle:{"margin-left":"70%"}},[t("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:n.sure}},[n._v("确定")]),n._v(" "),t("Button",{on:{click:n.cancel}},[n._v("取消")])],1)],1)],1)},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};e.default=i}});